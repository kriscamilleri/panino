# /backend/powersync-service/sync.rules.yaml
bucket_definitions:
  by_user:
    parameters: SELECT request.user_id() AS user_id
    data:
      # FIXED: Removed the non-existent "name" column from the users table query
      - SELECT id, email FROM users WHERE id = bucket.user_id
      - SELECT id, name, parent_id, created_at, user_id
        FROM folders
        WHERE user_id = bucket.user_id
      - SELECT id, folder_id, title, content, created_at, updated_at, user_id
        FROM notes
        WHERE user_id = bucket.user_id
      - SELECT id, user_id, filename, mime_type, created_at
        FROM images
        WHERE user_id = bucket.user_id